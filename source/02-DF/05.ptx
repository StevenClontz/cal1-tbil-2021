<?xml version='1.0' encoding='utf-8'?>

<section xml:id="DF5" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>The chain rule (DF5)</title>
  <objectives>
    <ul>
      <li>
        <xi:include href="outcomes/05.ptx" />
      </li>
    </ul>
  </objectives>
    
    <notation> When we consider the consider the composition <m>f \circ g</m>of the function <m>f</m> with the function <m>g</m>, we mean the composite function <m>f(g(x))</m>, where the function <m>g</m> is applied first  and then <m>f</m> is applied to the output of <m>g</m>. We also call <m>f</m> the outside function whilst <m>g</m> is the inside function. </notation>
       <activity>
           <task> 
        <p> Consider the function <m>f(x) = -x^2+5 </m> and <m>g(x)=2x-1</m>. Which of the following is a formula for <m>f(g(x))</m>? </p>
           <ol label="A">
                <li><p> <m>-4x^2 +4x +4 </m> </p></li>
         <li><p> <m>4x^2 -4x +5 </m> </p></li>
           <li><p> <m>-2x^2 +9 </m> </p></li>
               <li><p> <m>-2x^2 +4 </m> </p></li>              
              </ol>
               </task>
           <task> 
               <p> One of the options above is a formula for <m>g(f(x))</m>. Which one? </p> </task>
                   </activity>
    
  <activity>
           <task> 
        <p> Consider the composite function <m> \sqrt{e^x}</m>. Which function is the outside function <m>f(x)</m> and which one is the inside function <m>g(x)</m>? </p>
           <ol label="A">
                <li><p> <m>f(x)=x^2 \, , \, g(x)=e^x </m> </p></li>
                 <li><p> <m>f(x)=\sqrt{x} \, , \, g(x)=e^x </m> </p></li>  
                <li><p> <m>f(x)=e^x \, , \, g(x)=\sqrt{x} </m> </p></li>
               <li><p> <m>f(x)=e^x \, , \, g(x)=x^2 </m> </p></li>
              </ol>
               </task>
           <task> 
               <p> Using properties of the exponents, we can rewrite the original function as <m> e^{\frac{x}{2}}</m>. Using this new expression, what is your new inside function and your new outside function?</p> </task>
        <task> 
               <p> Consider the function <m>e^{\sqrt{x}}</m>. In this case, what are the inside and outside functions in this case? </p> </task>
                   </activity>
  <activity>
      <introduction> <p>In this activity we will build the intuition for the chain rule using a real-world scenario and differential notation for derivatives. Consider the following scenario. </p>
      <quote>  My neighborhood is being invaded! The squirrel population grows based on acorn availability, at a rate of 2 squirrels per bushel of acorns.  Acorn availability grows at a rate of 100 bushels of acorns per week. How fast is the squirrel population growing per week? </quote>
      </introduction>
           <task> 
        <p> The scenario gives you information regarding the rate of growth of <m>s(a)</m>, the squirrel population as a function of acorn availability (measured in bushels). What is the current value of <m>\frac{ds}{da}</m>? </p>
           <ol label="A">
                <li><p> 2 </p></li>
                 <li><p>100  </p></li>  
                <li><p> 200 </p></li>
               <li><p> 50 </p></li>
              </ol>
               </task>
        <task> 
        <p> The scenario gives you information regarding the rate of growth of <m>a(t)</m>, the acorn availability as a function of time (measured in weeks). What is the current value of <m>\frac{da}{dt}</m>? </p>
           <ol label="A">
                <li><p> 2 </p></li>
                 <li><p>100  </p></li>  
                <li><p> 200 </p></li>
               <li><p> 50 </p></li>
              </ol>
               </task>
       <task> 
        <p> Given all the information provided, what is your best guess for the value of  <m>\frac{ds}{dt}</m>, the rate at which the quirrel population is growing per week? </p>
           <ol label="A">
                <li><p> 2 </p></li>
                 <li><p>100  </p></li>  
                <li><p> 200 </p></li>
               <li><p> 50 </p></li>
              </ol>
               </task>
             <task> 
        <p> Given your answers above, what is the relationship between <m>\frac{ds}{da}, \frac{da}{dt}, \frac{ds}{dt}</m>? </p>
               </task>
                   </activity>
       
   <definition> 
<p> When looking at the composite function <m>f(g(x))</m>, we have that </p>
<me>
       \frac{d}{dx}\Big(f( g(x) )\Big)= f'(\mathbf{g(x)}) \cdot g'(x). </me>
<p>       Using differential notation, if we consider the composite function <m>(v \circ u)(x)</m>, we have that </p>
<me>
       \frac{dv}{dx}= \frac{dv}{du} \cdot \frac{du}{dx} </me>
</definition>
 
    <warning> <p> It's important to consider the input of a function when taking the derivative! In fact, <m>f'(g(x))</m>  and <m>f'(x)</m> are different functions. Also computing <m>  \frac{dv}{dx} </m> gives a different result than computing <m>  \frac{dv}{du} </m>. </p></warning>
    
    <activity>
           <task> 
        <p> Consider the function <m>f(x) = -x^2+5 </m> and <m>g(x)=2x-1</m>. Notice that <m>f(g(x))= -4x^2 +4x +4 </m>. Which of the following is the derivative function of the composite function <m>f(g(x))</m>? </p>
           <ol label="A">
                <li><p> <m>-8x +4 </m> </p></li>
         <li><p> <m> -4x </m> </p></li>
           <li><p> <m>-2x </m> </p></li>
               <li><p> <m>2 </m> </p></li>              
              </ol>
               </task>
           <task> 
               <p> One of the options above is a formula for <m>f'(x) \cdot g'(x) </m>. Which one? Notice that this is not the same as the derivative of <m>f(g(x))</m>! </p> </task>
                   </activity>   

   
    
  <activity>
   <introduction>  <p>Below you are given the graphs of two functions: <m>a(x)</m> and <m>b(x)</m>. Use the graphs to compute the required vaules of the functions and of their derivatives, when possible. There are points where the derivative of these functions is not defined! Notice that to compute the derivative at a point, you first want to find the general formula for the derivative as a function of <m>x</m> and then plug in the input you want to study.  </p> 
         <figure>
                    <image width="50%">
                    <latex-image>  
\begin{multicols}{2}
\begin{center}
\begin{tikzpicture}
\begin{axis}[
    axis lines=middle,
    xmin=-5,xmax=5,ymin=-3,ymax=3,
%   xtick={-6.28, -4.71,...,6.28},
%   ytick={-4, -3,...,4},
%   xticklabels={$-2\pi$, $-3\pi/2$, $-\pi$ , $-\pi/2$, 0  , $\pi/2$, $\pi$, $3\pi/2$, $-2\pi$}, 
    xlabel={$x$},
    ylabel={$y$}
    ]
  \addplot[domain=-4:-0.1,blue, ultra thick,samples=500]  {-2} ;
   \addplot[domain=0:4,blue,ultra thick, samples=500]  {2} ;
   \addplot [only marks, blue] table {
0	2
};
\addplot [only marks, blue, mark=o] table {
0 -2
};
 \addplot[mark=none, color=blue, nodes near coords={$a(x)$}] coordinates {(-4,2)};
\end{axis}
\end{tikzpicture}
\end{center}
\columnbreak
\begin{center}
\begin{tikzpicture}
\begin{axis}[
    axis lines=middle,
    xmin=-5,xmax=5,ymin=-3,ymax=3,
%   xtick={-6.28, -4.71,...,6.28},
%   ytick={-4, -3,...,4},
%   xticklabels={$-2\pi$, $-3\pi/2$, $-\pi$ , $-\pi/2$, 0  , $\pi/2$, $\pi$, $3\pi/2$, $-2\pi$}, 
    xlabel={$x$},
    ylabel={$y$}
    ]
  \addplot[domain=-4:0,blue, ultra thick, samples=500]  {2+x} ;
   \addplot[domain=0:4,blue, ultra thick, samples=500]  {2-x} ;
    \addplot[mark=none, color=blue, nodes near coords={$b(x)$}] coordinates {(4,2)};
\end{axis}
\end{tikzpicture}
\end{center}
\end{multicols}
                         
    </latex-image>
                    </image>
                    <caption>The graphs of <m> a(x)</m> and <m> b(x)</m></caption>
                </figure>
  </introduction> 
       <task> 
        <p> Which of the following values is equal to the derivative of <m>a \circ b</m> at <m> x=2 </m>? </p>
           <ol label="A">
                <li><p> <m> </m> </p></li>
         <li><p> <m>  </m> </p></li>
           <li><p> <m> </m> </p></li>
               <li><p> The derivative does not exist at that  </p></li>              
              </ol>
               </task>
       <task> 
        <p> Which of the following values is equal to the derivative of <m>a \circ b</m> at x=2? </p>
           <ol label="A">
                <li><p> <m> </m> </p></li>
         <li><p> <m>  </m> </p></li>
           <li><p> <m> </m> </p></li>
               <li><p> <m> </m> </p></li>              
              </ol>
               </task>
  </activity>

</section>